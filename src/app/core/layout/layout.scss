.layout {
  display: grid;
  grid-template-columns: var(--sidebar-width) 1fr;

  height: 100dvh;
  overflow: hidden;

  background: var(--color-bg);
  color: var(--color-text);

  will-change: grid-template-columns;
  transition: grid-template-columns 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);

  isolation: isolate;
  position: relative;

  &--collapsed {
    grid-template-columns: var(--sidebar-width-collapsed) 1fr;
  }

  &__sidebar {
    background: var(--color-surface);
    border-right: 1px solid var(--color-border);

    height: 100%;
    width: 100%;

    overflow-y: auto;
    overflow-x: hidden;
    z-index: var(--z-sidebar, 50);
  }

  &__main {
    display: flex;
    flex-direction: column;
    min-width: 0;
    position: relative;

    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;

    -webkit-overflow-scrolling: touch;
  }

  &__header {
    position: sticky;
    top: 0;
    z-index: var(--z-header, 40);

    background: color-mix(in srgb, var(--color-surface), transparent 15%);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);

    border-bottom: 1px solid var(--color-border);
    padding: var(--space-3) var(--space-5);
  }

  &__content {
    flex: 1;
    padding: var(--space-6);
  }

  &__container {
    max-width: 1400px;
    width: 100%;
    margin-inline: auto;
    animation: fadeIn 0.4s ease-out;

    height: 100%;
    display: flex;
    flex-direction: column;
  }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}


@media (max-width: 1024px) {
  .layout {
    grid-template-columns: var(--sidebar-width-collapsed) 1fr;
  }
}

@media (max-width: 640px) {

  .layout__content {
    padding: var(--space-4);
  }

  .layout__header {
    padding: var(--space-3) var(--space-4);
  }
}

@media (max-width: 750px) {
  .layout {
    grid-template-columns: 1fr;
    grid-template-rows: 1fr auto;

    &--collapsed {
      grid-template-columns: 1fr;
    }
  }

  .layout__sidebar {
    grid-row: 2;
    border-right: none;
    border-top: 1px solid var(--color-border);
    height: 60px;
    overflow: hidden;
  }

  .layout__main {
    grid-row: 1;
  }
}
