<div class="modal-backdrop" (click)="close()"></div>

<div class="modal">
  <header class="modal__header">
    <div class="modal__header-content">
      <h3 class="modal__title">Kontakt erstellen</h3>
      <p class="modal__subtitle">Füge einen neuen Kontakt zu deinem Adressbuch hinzu.</p>
    </div>

    <button class="btn-close" type="button" (click)="close()" title="Schließen">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M18 6 6 18" />
        <path d="m6 6 12 12" />
      </svg>
    </button>
  </header>

  <form class="modal__form" (submit)="submit($event)">
    <div class="form-field">
      <label for="name" class="form-field__label">Name</label>
      <input
        id="name"
        type="text"
        [field]="form.name"
        class="form-field__input"
        placeholder="Max Mustermann"
        autofocus
      />

      @if (isInvalid(form.name) && (form.name().touched() || triedSubmit())) {
      <small class="form-field__error">Der Name ist erforderlich.</small>
      }
    </div>

    <div class="form-field">
      <label for="email" class="form-field__label">
        E-Mail <span class="optional">(Optional)</span>
      </label>
      <input
        id="email"
        type="email"
        [field]="form.email"
        class="form-field__input"
        placeholder="max@beispiel.de"
      />
    </div>

    <div class="form-field">
      <label for="phone" class="form-field__label">
        Telefon <span class="optional">(Optional)</span>
      </label>
      <input
        id="phone"
        type="tel"
        [field]="form.phone"
        class="form-field__input"
        placeholder="+49 170 1234567"
      />
    </div>

    <div class="form-field">
      <label for="address" class="form-field__label">
        Adresse <span class="optional">(Optional)</span>
      </label>
      <input
        id="address"
        type="text"
        [field]="form.address"
        class="form-field__input"
        placeholder="Musterstraße 1, 12345 Berlin"
      />
    </div>

    <div class="modal__actions">
      <button type="button" class="btn btn--secondary" (click)="close()">Abbrechen</button>

      <button type="submit" class="btn btn--primary" [disabled]="isSubmitting()">
        @if (isSubmitting()) { Wird gespeichert… } @else { Kontakt erstellen }
      </button>
    </div>
  </form>
</div>
