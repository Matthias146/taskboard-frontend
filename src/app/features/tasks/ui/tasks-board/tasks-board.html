<app-modal [open]="openCreateModal()" (closed)="closeModal()">
  <app-task-create (saved)="closeModal()" />
</app-modal>
<div class="board">
  <header class="board__header">
    <h2 class="board__title">ğŸ—‚ï¸ Dein Taskboard</h2>
    <button class="btn btn--primary" (click)="openModal()">â• Task</button>
  </header>

  <!-- Create Task Modal -->

  <!-- Columns -->
  <section class="board__columns">
    <app-task-column
      title="Offen"
      [status]="TaskStatus.OPEN"
      [tasks]="tasksOpen()"
      [connectedTo]="[TaskStatus.IN_PROGRESS, TaskStatus.DONE]"
      (cardDropped)="onColumnDrop($event)"
      (cardSelected)="openDetails($event)"
      (delete)="removeTask($event)"
    />

    <app-task-column
      title="In Arbeit"
      [status]="TaskStatus.IN_PROGRESS"
      [tasks]="tasksProgress()"
      [connectedTo]="[TaskStatus.OPEN, TaskStatus.DONE]"
      (cardDropped)="onColumnDrop($event)"
      (cardSelected)="openDetails($event)"
      (delete)="removeTask($event)"
    />

    <app-task-column
      title="Erledigt"
      [status]="TaskStatus.DONE"
      [tasks]="tasksDone()"
      [connectedTo]="[TaskStatus.OPEN, TaskStatus.IN_PROGRESS]"
      (cardDropped)="onColumnDrop($event)"
      (cardSelected)="openDetails($event)"
      (delete)="removeTask($event)"
    />
  </section>

  <!-- Task Detail Drawer -->
  @if (selectedTask()) {
  <app-task-detail-drawer
    [task]="selectedTask()!"
    (closed)="closeDetails()"
    (saved)="onTaskSaved($event)"
  />
  }
</div>
