<header class="app-header">
  <div class="app-header__left"></div>

  @if (isLoggedIn()) {
  <div class="app-header__right">
    <div
      class="user-menu"
      [class.user-menu--open]="isMenuOpen()"
      (click)="toggleMenu()"
      role="button"
      tabindex="0"
    >
      <div class="user-menu__avatar">
        {{ initials() }}
      </div>

      <div class="user-menu__info">
        <div class="user-menu__name">
          {{ displayName() || 'Benutzer' }}
        </div>

        @if (roleLabel()) {
        <div class="user-menu__role">{{ roleLabel() }}</div>
        }
      </div>

      <div class="user-menu__chevron"></div>
    </div>

    @if (isMenuOpen()) {
    <div class="dropdown-backdrop" (click)="closeMenu()"></div>

    <div class="user-dropdown">
      <div class="user-dropdown__header">
        <div class="user-dropdown__avatar">
          {{ initials() }}
        </div>
        <div class="user-dropdown__meta">
          <div class="user-dropdown__name">{{ displayName() }}</div>
          @if (roleLabel()) {
          <div class="user-dropdown__role">{{ roleLabel() }}</div>
          }
        </div>
      </div>

      <hr class="user-dropdown__divider" />

      <button
        type="button"
        class="user-dropdown__item user-dropdown__item--danger"
        (click)="logout()"
      >
        ðŸšª Abmelden
      </button>
    </div>
    }
  </div>
  }
</header>
