<div class="register">
  <div class="register__card">
    <h2 class="register__title">Konto erstellen</h2>

    <form class="register__form" (submit)="onSubmit($event)" novalidate>
      <div class="form-field">
        <label class="form-field__label" for="name">Name</label>
        <input
          id="name"
          class="form-field__input"
          type="text"
          [field]="registerForm.name"
          placeholder="Dein Name"
        />

        @if (isInvalid(registerForm.name) && (registerForm.name().touched() || triedSubmit())) {
        <small class="form-field__error">Name ist erforderlich</small>
        }
      </div>

      <div class="form-field">
        <label class="form-field__label" for="email">E-Mail</label>
        <input
          id="email"
          class="form-field__input"
          type="email"
          [field]="registerForm.email"
          placeholder="z. B. test@example.com"
        />

        @if (isInvalid(registerForm.email) && (registerForm.email().touched() || triedSubmit())) {
        <small class="form-field__error">
          @if (hasError(registerForm.email, 'required')) { E-Mail ist erforderlich } @else { Bitte
          gültige E-Mail eingeben }
        </small>
        }
      </div>

      <div class="form-field">
        <label class="form-field__label" for="password">Passwort</label>
        <input
          id="password"
          class="form-field__input"
          type="password"
          [field]="registerForm.password"
          placeholder="••••••••"
        />

        @if (isInvalid(registerForm.password) && (registerForm.password().touched() ||
        triedSubmit())) {
        <small class="form-field__error">
          @if (hasError(registerForm.password, 'required')) { Passwort ist erforderlich } @else {
          Mindestens 6 Zeichen }
        </small>
        }
      </div>

      <div class="form-field">
        <label class="form-field__label" for="confirmPassword">Passwort bestätigen</label>
        <input
          id="confirmPassword"
          class="form-field__input"
          type="password"
          [field]="registerForm.confirmPassword"
          placeholder="Erneut eingeben"
        />

        @if (isInvalid(registerForm.confirmPassword) && (registerForm.confirmPassword().touched() ||
        triedSubmit())) {
        <small class="form-field__error">Bitte Passwort bestätigen</small>
        }
      </div>

      @if (errorMessage()) {
      <div class="form-error-banner">{{ errorMessage() }}</div>
      }

      <button class="btn btn--primary register__btn" type="submit" [disabled]="isSubmitting()">
        @if (isSubmitting()) { ⏳ Registriere… } @else { ✨ Registrieren }
      </button>

      <p class="register__login-hint">
        Bereits ein Konto?
        <a routerLink="/login">Hier einloggen</a>
      </p>
    </form>
  </div>
</div>
